/*
 * Copies footnotes generated by kramdown so they're inline.
 *
 * Created by Jonathon Mah on 2014-03-02.
 * Released to the public domain.
 */

(function () {
	function inlineFootnotes() {
		var footnoteLinks = document.querySelectorAll('.footnote');

		for (var i = 0; i < footnoteLinks.length; i++) {
			var footnoteLink = footnoteLinks[i];

			var footnoteLiId = footnoteLink.attributes.href.value;
			var footnoteLi = document.querySelector(footnoteLiId.replace(/:/g, "\\:"));
			var footnoteP = footnoteLi.querySelector("p");
			var clone = footnoteP.cloneNode(true);
			clone.classList.add("inline-footnote");
			clone.removeChild(clone.querySelector("a.reversefootnote"));

			footnoteLink.parentNode.insertBefore(clone, footnoteLink.nextSibling);
		}
	}

	document.addEventListener("DOMContentLoaded", inlineFootnotes);
})();
